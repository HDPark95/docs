# 레이트 리미터
**ID:** 202509232_레이트리미터
**생성일:** 2025-09-21
**태그:** #아키텍처 #성능최적화 #시스템보호

## 핵심 개념

레이트 리미터(Rate Limiter)는 시스템에 들어오는 요청의 속도를 제어하는 기술로, 특정 시간 동안 처리할 수 있는 요청의 수를 제한하는 메커니즘이다. 시스템 과부하를 방지하고 서비스의 안정성과 가용성을 보장하는 핵심 기술이다.

## 주요 목적

### 1. 시스템 보호
- 과도한 트래픽으로부터 서비스 보호
- DDoS 공격 및 악의적 요청 차단
- 시스템 리소스 고갈 방지

### 2. 비용 관리
- API 호출 비용 제어
- 예측 가능한 서비스 운영
- 공정한 리소스 분배

## 주요 알고리즘

### 1. 토큰 버킷(Token Bucket)

**동작 원리:**
- 토큰이 일정 속도로 버킷에 추가
- 각 요청이 토큰을 소비
- 토큰이 없으면 요청 거부

**장점:**
- 버스트 트래픽 허용 (토큰 축적 시)
- 구현이 비교적 간단하고 효율적

### 2. 리키 버킷(Leaky Bucket)

**동작 원리:**
- 요청이 버킷에 들어가고 일정한 속도로 처리
- 버킷이 가득 차면 새로운 요청 거부

**장점:**
- 일정한 출력 속도 보장
- 트래픽 스파이크 완화에 효과적

### 3. 슬라이딩 윈도우(Sliding Window)

**동작 원리:**
- 현재 윈도우와 이전 윈도우의 요청을 가중치 적용하여 계산
- 시간에 따라 부드럽게 이동하는 윈도우

**장점:**
- 고정 윈도우의 경계 문제 해결
- 더 부드러운 속도 제한 적용

## 구현 전략

### 1. 중앙 집중식 vs 분산식

**중앙 집중식:**
- Redis/Memcached 같은 중앙 저장소 사용
- 모든 서버 인스턴스가 동일한 카운터 참조

**분산식:**
- 각 서버가 로컬에서 속도 제한 적용
- 서버 간 동기화 메커니즘 필요

### 2. 세분화된 제한

- **사용자별 제한**: 각 사용자 ID나 API 키별 다른 제한
- **엔드포인트별 제한**: 중요한 API에 더 엄격한 제한
- **계층별 제한**: 유료 사용자에게 더 높은 한도

## 구현 시 고려사항

### 1. 응답 처리

```http
HTTP/1.1 429 Too Many Requests
Retry-After: 60
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 0
X-RateLimit-Reset: 1640995200
```

### 2. 성능 최적화

- 메모리 효율적인 데이터 구조 사용
- 속도 제한 결정을 위한 계산 최소화
- 캐싱 전략 활용

### 3. 모니터링

- 속도 제한 이벤트 로깅
- 제한 임계값 근접 시 알림
- 사용 패턴 분석을 위한 지표 수집

## 관련 개념

- [[202509233_토큰버킷알고리즘구현]] - 토큰 버킷 알고리즘의 구체적 구현
- [[202509234_분산환경레이트리미터]] - 분산 시스템에서의 레이트 리미터
- [[202509235_API게이트웨이패턴]] - 레이트 리미터가 활용되는 아키텍처 패턴

## 결론

레이트 리미터는 현대 분산 시스템에서 필수적인 보호 메커니즘이다. 적절한 알고리즘 선택과 구현 전략을 통해 시스템의 안정성과 공정성을 보장할 수 있으며, 비즈니스 요구사항에 맞는 세분화된 제한 정책을 적용할 수 있다.